{% extends "base.html" %}
{% block title %}Team Details{% endblock %}

{% block head %}
<!-- Chart.js for charts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- Custom CSS -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/singleteam.css') }}">
{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-6">
    <!-- Top navigation bar -->
    <div class="flex justify-between items-center mb-4">
        <h1 class="page-title">Team Details</h1>
        <a href="/teams" class="btn-primary">
            <i class="fas fa-arrow-left mr-2"></i> Back to Teams
        </a>
    </div>
    
    <!-- Points calculation note -->
    <div class="info-banner text-blue-800 text-sm">
        <i class="fas fa-info-circle info-icon"></i>
        <span>Points System: Win = 2 points, Draw = 1 point, Loss = 0 points</span>
    </div>

    <!-- Empty state message - shown when no data or team not found -->
    <div id="emptyTeamState" class="hidden bg-white p-8 rounded-lg shadow-md text-center">
        <i class="fas fa-user-slash text-gray-300 text-5xl mb-4"></i>
        <h2 class="text-xl font-semibold text-gray-700 mb-2" id="emptyStateMessage">Team Not Found</h2>
        <p class="text-gray-500 mb-4">Return to the teams overview to select a valid team.</p>
        <a href="/teams" class="btn-primary">
            <i class="fas fa-arrow-left mr-2"></i> Back to Teams
        </a>
    </div>
    
    <!-- Team details section - populated dynamically with JavaScript -->
    <div id="teamDetails" class="bg-white rounded-lg shadow-md p-5 mb-8 animated">
        <div class="flex flex-col md:flex-row items-start gap-8">
            <!-- Team Profile Card -->
            <div class="w-full md:w-1/3 mb-6 md:mb-0 animation-delay-1">
                <div class="profile-card flex flex-col items-center">
                    <div id="teamLogo" class="team-logo-large bg-gradient-to-r from-blue-500 to-blue-700 text-white">
                        <!-- Team initials inserted here -->
                    </div>
                    <h2 class="text-2xl font-bold mb-1 text-center" id="teamName">Team Name</h2>
                    <p class="text-gray-600 mb-4 text-center" id="teamRecord">W0 D0 L0</p>
                    
                    <div class="w-full">
                        <div class="flex justify-between text-sm mb-1">
                            <span class="text-gray-600">Win Rate</span>
                            <span class="font-medium" id="winRateText">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div id="winRateBar" class="progress-value" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="stats-grid w-full mt-4">
                        <div class="stat-item">
                            <div class="stat-value" id="matchesCount">0</div>
                            <div class="stat-label">Matches</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="winsCount">0</div>
                            <div class="stat-label">Wins</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="goalsCount">0</div>
                            <div class="stat-label">Goals</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Team Performance Section -->
            <div class="w-full md:w-2/3 animation-delay-2">
                <h3 class="section-title"><i class="fas fa-chart-line"></i> Team Performance</h3>
                
                <div class="mb-6">
                    <h4 class="font-semibold text-gray-700 mb-3">Recent Results</h4>
                    <div class="overflow-x-auto">
                        <table class="results-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Tournament</th>
                                    <th>Match</th>
                                    <th>Result</th>
                                </tr>
                            </thead>
                            <tbody id="recentResults">
                                <!-- Recent results will be inserted here -->
                            </tbody>
                        </table>
                        
                        <!-- Empty state for no results -->
                        <div id="noResultsMessage" class="hidden text-center py-6 text-gray-500 bg-gray-50 rounded-lg mt-4">
                            <i class="fas fa-calendar-times text-gray-300 text-3xl mb-2"></i>
                            <p>No match results available for this team yet.</p>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 animation-delay-3">
                    <!-- Top Scorers Card -->
                    <div>
                        <h4 class="font-semibold text-gray-700 mb-3"><i class="fas fa-futbol text-blue-500 mr-1"></i> Top Scorers</h4>
                        <div class="stats-card">
                            <ul id="topScorers" class="scorer-list">
                                <!-- Top scorers will be inserted here -->
                            </ul>
                            
                            <!-- Empty state for no scorers -->
                            <div id="noScorersMessage" class="hidden text-center py-6 text-gray-500">
                                <i class="fas fa-users-slash text-gray-300 text-3xl mb-2"></i>
                                <p>No scoring data available for this team yet.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Team Stats Card -->
                    <div>
                        <h4 class="font-semibold text-gray-700 mb-3"><i class="fas fa-chart-pie text-blue-500 mr-1"></i> Team Stats</h4>
                        <div class="stats-card">
                            <ul class="stats-list">
                                <li class="stats-item">
                                    <span class="stats-label">Total Points</span>
                                    <span class="stats-value text-blue-600" id="totalPoints">0</span>
                                </li>
                                <li class="stats-item">
                                    <span class="stats-label">Win Rate</span>
                                    <span class="stats-value" id="winRatePercent">0%</span>
                                </li>
                                <li class="stats-item">
                                    <span class="stats-label">Goals Per Match</span>
                                    <span class="stats-value" id="goalsPerMatch">0</span>
                                </li>
                                <li class="stats-item">
                                    <span class="stats-label">Goal Difference</span>
                                    <span class="stats-value" id="goalDifference">0</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/singleteam.js') }}"></script>
{% endblock %}
