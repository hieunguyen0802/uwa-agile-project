{%extends "base.html" %} 
{% block title %}Dashboard{% endblock %} 
{% block content %}


<h1 class="text-3xl font-bold text-center text-blue-500">
  Welcome to the Dashboard Page!
</h1>




=======
{% extends "base.html" %} 
{% block title %}Team Data Analysis Dashboard{% endblock %}

{% block head %}
<!-- Using multiple CDN sources to ensure G2Plot library loads -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/antv-g2plot/2.4.31/g2plot.min.js" integrity="sha512-QQYJh+uuCqLqzhvEk/nzZKNjX59zjWCQYr0U0G6ozYn9zW0GQJzX8B8jsFgUxLNC3U+5nW4RwZ9/Qm3zlCDJw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
// Ensure G2Plot is available, try backup CDN if the first one fails
if (typeof G2Plot === 'undefined') {
    document.write('<script src="https://unpkg.com/@antv/g2plot@2.4.31/dist/g2plot.min.js"><\/script>');
}
</script>
<style>
/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 50;
    overflow: auto;
}

.modal-content {
    background-color: white;
    margin: 10% auto;
    padding: 20px;
    border-radius: 8px;
    max-width: 500px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    position: relative;
}

.close {
    position: absolute;
    right: 20px;
    top: 15px;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
}

.modal-title {
    margin-bottom: 20px;
    font-size: 1.25rem;
    font-weight: 600;
}

.user-tag {
    display: inline-flex;
    align-items: center;
    background-color: #e0f2fe;
    border-radius: 16px;
    padding: 4px 10px;
    margin: 4px;
}

.remove-tag {
    margin-left: 6px;
    cursor: pointer;
    color: #0369a1;
}

.user-list {
    max-height: 200px;
    overflow-y: auto;
    margin-top: 8px;
    border: 1px solid #e2e8f0;
    border-radius: 6px;
}

.user-item {
    padding: 8px 12px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.user-item:hover {
    background-color: #f1f5f9;
}
</style>
{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-6">
    <!-- Share Button and Actions Row -->
    <div class="flex justify-between items-center mb-6">
        <div>
            <!-- Empty div for spacing -->
        </div>
        <div class="flex space-x-3">
            <button id="shareBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center">
                <i class="fas fa-share-alt mr-2"></i> Share
            </button>
        </div>
    </div>
    
    <!-- Data Filter Section (Moved to top) -->
    <div class="bg-white rounded-lg shadow-md p-5 mb-8">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">Data Filters</h2>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Season</label>
                <select class="w-full border-gray-300 rounded-md shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                    <option>All Seasons</option>
                    <option>2025 Season</option>
                    <option>2024 Season</option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Match Type</label>
                <select class="w-full border-gray-300 rounded-md shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                    <option>All Matches</option>
                    <option>League</option>
                    <option>Cup</option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Team</label>
                <select class="w-full border-gray-300 rounded-md shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                    <option>All Teams</option>
                    <option>Barcelona</option>
                    <option>Real Madrid</option>
                    <option>Manchester City</option>
                </select>
            </div>
            <div class="flex items-end">
                <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full">
                    Apply Filters
                </button>
            </div>
        </div>
    </div>
    
    <!-- Overview Cards Section -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
        <!-- Total Matches -->
        <div class="bg-white rounded-lg shadow-md p-5 border-l-4 border-blue-500">
            <div class="flex justify-between items-center">
                <div>
                    <p class="text-sm text-gray-500 font-medium">Total Matches</p>
                    <p class="text-2xl font-bold text-gray-800">24</p>
                </div>
                <div class="rounded-full bg-blue-100 p-3">
                    <i class="fas fa-futbol text-blue-500 text-xl"></i>
                </div>
            </div>
            <div class="mt-3">
                <span class="text-green-500 text-sm font-medium">
                    <i class="fas fa-arrow-up"></i> 12%
                </span>
                <span class="text-sm text-gray-500 ml-1">vs last month</span>
            </div>
        </div>
        
        <!-- Total Goals -->
        <div class="bg-white rounded-lg shadow-md p-5 border-l-4 border-green-500">
            <div class="flex justify-between items-center">
                <div>
                    <p class="text-sm text-gray-500 font-medium">Total Goals</p>
                    <p class="text-2xl font-bold text-gray-800">78</p>
                </div>
                <div class="rounded-full bg-green-100 p-3">
                    <i class="fas fa-chart-line text-green-500 text-xl"></i>
                </div>
            </div>
            <div class="mt-3">
                <span class="text-green-500 text-sm font-medium">
                    <i class="fas fa-arrow-up"></i> 8%
                </span>
                <span class="text-sm text-gray-500 ml-1">vs last month</span>
            </div>
        </div>
        
        <!-- Average Goals -->
        <div class="bg-white rounded-lg shadow-md p-5 border-l-4 border-amber-500">
            <div class="flex justify-between items-center">
                <div>
                    <p class="text-sm text-gray-500 font-medium">Avg. Goals/Match</p>
                    <p class="text-2xl font-bold text-gray-800">3.25</p>
                </div>
                <div class="rounded-full bg-amber-100 p-3">
                    <i class="fas fa-calculator text-amber-500 text-xl"></i>
                </div>
            </div>
            <div class="mt-3">
                <span class="text-red-500 text-sm font-medium">
                    <i class="fas fa-arrow-down"></i> 3%
                </span>
                <span class="text-sm text-gray-500 ml-1">vs last month</span>
            </div>
        </div>
        
        <!-- Participating Teams -->
        <div class="bg-white rounded-lg shadow-md p-5 border-l-4 border-purple-500">
            <div class="flex justify-between items-center">
                <div>
                    <p class="text-sm text-gray-500 font-medium">Participating Teams</p>
                    <p class="text-2xl font-bold text-gray-800">8</p>
                </div>
                <div class="rounded-full bg-purple-100 p-3">
                    <i class="fas fa-users text-purple-500 text-xl"></i>
                </div>
            </div>
            <div class="mt-3">
                <span class="text-gray-500 text-sm font-medium">
                    <i class="fas fa-equals"></i> 0%
                </span>
                <span class="text-sm text-gray-500 ml-1">vs last month</span>
            </div>
        </div>
    </div>
    
    <!-- Chart Area -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        <!-- Team Points Chart -->
        <div class="bg-white rounded-lg shadow-md p-5">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-gray-800">Team Points</h2>
                <div class="flex space-x-2">
                    <select class="text-sm border rounded-md px-2 py-1">
                        <option>2025 Season</option>
                        <option>2024 Season</option>
                    </select>
                </div>
            </div>
            <div id="teamPointsChart" class="h-80"></div>
        </div>
        
        <!-- Win-Draw-Loss Distribution -->
        <div class="bg-white rounded-lg shadow-md p-5">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-gray-800">Win-Draw-Loss Distribution</h2>
                <div class="flex space-x-2">
                    <select class="text-sm border rounded-md px-2 py-1">
                        <option>All Teams</option>
                        <option>Barcelona</option>
                        <option>Real Madrid</option>
                    </select>
                </div>
            </div>
            <div id="winDrawLossChart" class="h-80"></div>
        </div>
    </div>
    
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        <!-- Recent Match Results -->
        <div class="bg-white rounded-lg shadow-md p-5">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-gray-800">Recent Match Results</h2>
                <div>
                    <button class="text-blue-600 hover:text-blue-800">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
            </div>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Home</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Score</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Away</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <tr>
                            <td class="px-6 py-3 whitespace-nowrap text-sm text-gray-500">2025-03-17</td>
                            <td class="px-6 py-3 whitespace-nowrap">
                                <div class="flex items-center">
                                    <div class="h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center mr-3 text-xs font-bold">BAR</div>
                                    <span class="text-sm font-medium text-gray-900">Barcelona</span>
                                </div>
                            </td>
                            <td class="px-6 py-3 whitespace-nowrap text-sm font-medium">
                                <span class="text-green-600">3</span>
                                <span class="mx-1">:</span>
                                <span class="text-red-600">2</span>
                            </td>
                            <td class="px-6 py-3 whitespace-nowrap">
                                <div class="flex items-center">
                                    <div class="h-8 w-8 rounded-full bg-red-100 flex items-center justify-center mr-3 text-xs font-bold">RMA</div>
                                    <span class="text-sm font-medium text-gray-900">Real Madrid</span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="px-6 py-3 whitespace-nowrap text-sm text-gray-500">2025-03-16</td>
                            <td class="px-6 py-3 whitespace-nowrap">
                                <div class="flex items-center">
                                    <div class="h-8 w-8 rounded-full bg-sky-100 flex items-center justify-center mr-3 text-xs font-bold">MCI</div>
                                    <span class="text-sm font-medium text-gray-900">Man City</span>
                                </div>
                            </td>
                            <td class="px-6 py-3 whitespace-nowrap text-sm font-medium">
                                <span class="text-green-600">2</span>
                                <span class="mx-1">:</span>
                                <span class="text-red-600">1</span>
                            </td>
                            <td class="px-6 py-3 whitespace-nowrap">
                                <div class="flex items-center">
                                    <div class="h-8 w-8 rounded-full bg-red-100 flex items-center justify-center mr-3 text-xs font-bold">LIV</div>
                                    <span class="text-sm font-medium text-gray-900">Liverpool</span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="px-6 py-3 whitespace-nowrap text-sm text-gray-500">2025-03-15</td>
                            <td class="px-6 py-3 whitespace-nowrap">
                                <div class="flex items-center">
                                    <div class="h-8 w-8 rounded-full bg-red-100 flex items-center justify-center mr-3 text-xs font-bold">BAY</div>
                                    <span class="text-sm font-medium text-gray-900">Bayern Munich</span>
                                </div>
                            </td>
                            <td class="px-6 py-3 whitespace-nowrap text-sm font-medium">
                                <span class="text-green-600">4</span>
                                <span class="mx-1">:</span>
                                <span class="text-red-600">0</span>
                            </td>
                            <td class="px-6 py-3 whitespace-nowrap">
                                <div class="flex items-center">
                                    <div class="h-8 w-8 rounded-full bg-yellow-100 flex items-center justify-center mr-3 text-xs font-bold">DOR</div>
                                    <span class="text-sm font-medium text-gray-900">Dortmund</span>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Player Goals Ranking -->
        <div class="bg-white rounded-lg shadow-md p-5">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-gray-800">Goal Scorers Ranking</h2>
                <div>
                    <select class="text-sm border rounded-md px-2 py-1">
                        <option>All Matches</option>
                        <option>League Only</option>
                        <option>Cup Only</option>
                    </select>
                </div>
            </div>
            <div id="playerGoalsChart" class="h-80"></div>
        </div>
    </div>
    
    <!-- Team Radar Comparison -->
    <div class="bg-white rounded-lg shadow-md p-5 mb-8">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-semibold text-gray-800">Team Radar Comparison</h2>
            <div class="flex space-x-2">
                <select class="text-sm border rounded-md px-2 py-1">
                    <option>Barcelona</option>
                    <option>Real Madrid</option>
                </select>
                <select class="text-sm border rounded-md px-2 py-1">
                    <option>Man City</option>
                    <option>Liverpool</option>
                </select>
            </div>
        </div>
        <div id="teamRadarChart" class="h-96"></div>
    </div>
</div>

<!-- Share Modal -->
<div id="shareModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2 class="modal-title">Share Dashboard</h2>
        
        <form id="shareForm" action="/share-dashboard" method="post">
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Dashboard Name</label>
                <input type="text" name="dashboardName" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="My Soccer Analytics Dashboard" required>
            </div>
            
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Share with (Enter email)</label>
                <div class="flex">
                    <input type="email" id="userEmail" class="w-full px-3 py-2 border border-gray-300 rounded-l-md" placeholder="user@example.com">
                    <button type="button" id="addUserBtn" class="bg-blue-600 text-white px-4 py-2 rounded-r-md">Add</button>
                </div>
                <div id="userTags" class="mt-2 flex flex-wrap"></div>
                <input type="hidden" name="sharedWith" id="sharedWithInput">
            </div>
            
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Suggested Users</label>
                <div id="userList" class="user-list">
                    <div class="user-item" data-email="john.doe@example.com">John Doe (john.doe@example.com)</div>
                    <div class="user-item" data-email="jane.smith@example.com">Jane Smith (jane.smith@example.com)</div>
                    <div class="user-item" data-email="robert.johnson@example.com">Robert Johnson (robert.johnson@example.com)</div>
                    <div class="user-item" data-email="emma.williams@example.com">Emma Williams (emma.williams@example.com)</div>
                </div>
            </div>
            
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Permission Level</label>
                <select name="permissionLevel" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                    <option value="view">View only</option>
                    <option value="edit">View and edit</option>
                </select>
            </div>
            
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">Add a note (optional)</label>
                <textarea name="note" class="w-full px-3 py-2 border border-gray-300 rounded-md" rows="2" placeholder="Here's the soccer analytics dashboard we discussed..."></textarea>
            </div>
            
            <div class="flex justify-end">
                <button type="button" id="cancelShareBtn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-md mr-2">Cancel</button>
                <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md">Share Dashboard</button>
            </div>
        </form>
    </div>
</div>

<!-- Inline script to simplify chart initialization logic -->
<script>
window.addEventListener('DOMContentLoaded', function() {
    console.log('Starting chart initialization...');
    
    // If G2Plot is unavailable, try backup loading method
    if (typeof G2Plot === 'undefined') {
        console.error('G2Plot library not loaded! Trying direct script insertion');
        var script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/@antv/g2plot@2.4.31/dist/g2plot.min.js';
        script.onload = initAllCharts;
        document.head.appendChild(script);
    } else {
        console.log('G2Plot library exists, initializing charts directly');
        setTimeout(initAllCharts, 100);
    }
});

function initAllCharts() {
    console.log('Chart initialization function called');
    
    // Chart 1: Team Points
    try {
        new G2Plot.Bar('teamPointsChart', {
            data: [
                { team: 'Barcelona', points: 24 },
                { team: 'Real Madrid', points: 21 },
                { team: 'Man City', points: 18 },
                { team: 'Liverpool', points: 16 },
                { team: 'Bayern Munich', points: 15 },
                { team: 'Dortmund', points: 12 },
                { team: 'PSG', points: 10 },
                { team: 'Juventus', points: 9 }
            ],
            xField: 'points',
            yField: 'team',
            seriesField: 'team',
            legend: false,
            label: { position: 'right' }
        }).render();
        console.log('Team points chart rendered');
    } catch (e) {
        console.error('Team points chart rendering failed:', e);
    }
    
    // Chart 2: Win-Draw-Loss Distribution
    try {
        new G2Plot.Pie('winDrawLossChart', {
            data: [
                { name: 'Win', value: 14 },
                { name: 'Draw', value: 6 },
                { name: 'Loss', value: 4 }
            ],
            angleField: 'value',
            colorField: 'name',
            radius: 0.8,
            color: ['#52c41a', '#faad14', '#f5222d'],
            label: { 
                type: 'outer',
                content: '{name}: {percentage}'
            },
            legend: {
                layout: 'horizontal',
                position: 'bottom'
            }
        }).render();
        console.log('Win-Draw-Loss chart rendered');
    } catch (e) {
        console.error('Win-Draw-Loss chart rendering failed:', e);
    }
    
    // Chart 3: Player Goals Ranking
    try {
        new G2Plot.Bar('playerGoalsChart', {
            data: [
                { player: 'Messi', team: 'Barcelona', goals: 12 },
                { player: 'Lewandowski', team: 'Bayern Munich', goals: 10 },
                { player: 'Benzema', team: 'Real Madrid', goals: 8 },
                { player: 'Haaland', team: 'Man City', goals: 8 },
                { player: 'Salah', team: 'Liverpool', goals: 7 }
            ],
            xField: 'goals',
            yField: 'player',
            seriesField: 'team',
            legend: { position: 'top-right' },
            barStyle: { radius: [2, 2, 0, 0] },
            label: { position: 'right' }
        }).render();
        console.log('Player goals chart rendered');
    } catch (e) {
        console.error('Player goals chart rendering failed:', e);
    }
    
    // Chart 4: Team Radar Comparison
    try {
        // Prepare radar chart data
        const radarData = [];
        [
            { item: 'Attack', 'Barcelona': 80, 'Real Madrid': 70 },
            { item: 'Defense', 'Barcelona': 60, 'Real Madrid': 75 },
            { item: 'Passing', 'Barcelona': 90, 'Real Madrid': 80 },
            { item: 'Possession', 'Barcelona': 85, 'Real Madrid': 65 },
            { item: 'Fitness', 'Barcelona': 75, 'Real Madrid': 85 },
            { item: 'Tactics', 'Barcelona': 82, 'Real Madrid': 78 }
        ].forEach(d => {
            radarData.push({ item: d.item, team: 'Barcelona', value: d['Barcelona'] });
            radarData.push({ item: d.item, team: 'Real Madrid', value: d['Real Madrid'] });
        });
        
        new G2Plot.Radar('teamRadarChart', {
            data: radarData,
            xField: 'item',
            yField: 'value',
            seriesField: 'team',
            meta: {
                value: {
                    alias: 'Score',
                    min: 0,
                    max: 100
                }
            },
            xAxis: {
                line: null,
                tickLine: null
            },
            yAxis: {
                grid: {
                    alternateColor: 'rgba(0, 0, 0, 0.04)'
                }
            },
            point: { size: 3 },
            area: {}
        }).render();
        console.log('Team radar chart rendered');
    } catch (e) {
        console.error('Team radar chart rendering failed:', e);
    }
}

// Share Modal Functionality
document.addEventListener('DOMContentLoaded', function() {
    const shareModal = document.getElementById('shareModal');
    const shareBtn = document.getElementById('shareBtn');
    const closeBtn = document.querySelector('.close');
    const cancelBtn = document.getElementById('cancelShareBtn');
    const addUserBtn = document.getElementById('addUserBtn');
    const userEmailInput = document.getElementById('userEmail');
    const userTagsContainer = document.getElementById('userTags');
    const sharedWithInput = document.getElementById('sharedWithInput');
    const userListItems = document.querySelectorAll('.user-item');
    
    // Array to store shared emails
    let sharedEmails = [];
    
    // Open modal
    shareBtn.addEventListener('click', function() {
        shareModal.style.display = 'block';
    });
    
    // Close modal
    closeBtn.addEventListener('click', function() {
        shareModal.style.display = 'none';
    });
    
    cancelBtn.addEventListener('click', function() {
        shareModal.style.display = 'none';
    });
    
    // Close modal when clicking outside
    window.addEventListener('click', function(event) {
        if (event.target === shareModal) {
            shareModal.style.display = 'none';
        }
    });
    
    // Add user from input
    addUserBtn.addEventListener('click', function() {
        addUserEmail();
    });
    
    // Add user when pressing Enter
    userEmailInput.addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
            event.preventDefault();
            addUserEmail();
        }
    });
    
    // Add user when clicking on suggested user
    userListItems.forEach(item => {
        item.addEventListener('click', function() {
            const email = this.getAttribute('data-email');
            addEmailTag(email);
        });
    });
    
    // Function to add user email
    function addUserEmail() {
        const email = userEmailInput.value.trim();
        if (email && validateEmail(email)) {
            addEmailTag(email);
            userEmailInput.value = '';
        } else if (email) {
            alert('Please enter a valid email address');
        }
    }
    
    // Function to add email tag
    function addEmailTag(email) {
        if (sharedEmails.includes(email)) {
            return; // Skip if already added
        }
        
        sharedEmails.push(email);
        
        const tag = document.createElement('div');
        tag.className = 'user-tag';
        tag.innerHTML = `
            <span>${email}</span>
            <span class="remove-tag" data-email="${email}">Ã—</span>
        `;
        
        userTagsContainer.appendChild(tag);
        updateSharedWithInput();
        
        // Add event listener for removal
        tag.querySelector('.remove-tag').addEventListener('click', function() {
            const emailToRemove = this.getAttribute('data-email');
            sharedEmails = sharedEmails.filter(e => e !== emailToRemove);
            tag.remove();
            updateSharedWithInput();
        });
    }
    
    // Update hidden input with emails
    function updateSharedWithInput() {
        sharedWithInput.value = JSON.stringify(sharedEmails);
    }
    
    // Validate email
    function validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
    }
    
    // Form submission handler
    document.getElementById('shareForm').addEventListener('submit', function(event) {
        event.preventDefault();
        
        // In a real app, this would be an AJAX request
        alert('Dashboard shared with: ' + sharedEmails.join(', '));
        shareModal.style.display = 'none';
        
        // You would normally submit the form here or make an AJAX request
        // this.submit();
    });
});
</script>
{% endblock %}
